(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/message/ChatRoom"],{51:
/*!*****************************************************************!*\
  !*** C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue ***!
  \*****************************************************************/
/*! no static exports found */function(t,s,e){"use strict";e.r(s);var n=e(/*! ./ChatRoom.vue?vue&type=template&id=6ce13673&scoped=true& */52),o=e(/*! ./ChatRoom.vue?vue&type=script&lang=js& */54);for(var i in o)"default"!==i&&function(t){e.d(s,t,function(){return o[t]})}(i);e(/*! ./ChatRoom.vue?vue&type=style&index=0&id=6ce13673&scoped=true&lang=css& */56);var a=e(/*! ../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */10),r=Object(a.default)(o.default,n.render,n.staticRenderFns,!1,null,"6ce13673",null);r.options.__file="hoda/pages/message/ChatRoom.vue",s.default=r.exports},52:
/*!************************************************************************************************************!*\
  !*** C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=template&id=6ce13673&scoped=true& ***!
  \************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,s,e){"use strict";e.r(s);var n=e(/*! -!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ChatRoom.vue?vue&type=template&id=6ce13673&scoped=true& */53);e.d(s,"render",function(){return n.render}),e.d(s,"staticRenderFns",function(){return n.staticRenderFns})},53:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=template&id=6ce13673&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,s,e){"use strict";e.r(s),e.d(s,"render",function(){return n}),e.d(s,"staticRenderFns",function(){return o});var n=function(){var t=this.$createElement;this._self._c},o=[];n._withStripped=!0},54:
/*!******************************************************************************************!*\
  !*** C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************/
/*! no static exports found */function(t,s,e){"use strict";e.r(s);var n=e(/*! -!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ChatRoom.vue?vue&type=script&lang=js& */55),o=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(s,t,function(){return n[t]})}(i);s.default=o.a},55:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,s,e){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var n,o=(n=e(/*! ../../common/globalVariable.js */21))&&n.__esModule?n:{default:n};var i={data:function(){return{height:0,scrollTop:3e3,old:{scrollTop:0},InputBottom:0,fromNick:"",userId:"",msgList:[],body:"",flag:"",avatar:"",myAvatar:"",isChat:"",second:"",sex:"",showSend:!0}},onLoad:function(s){console.log(s),this.fromNick=s.fromNick,this.userId=s.userId,this.avatar=s.avatar,this.second=s.second,this.second=this.timeStamp(this.second),this.sex=o.default.sex,t.setNavigationBarTitle({title:this.fromNick}),o.default.isChatRoom=this.userId,o.default.nim.resetSessionUnread("p2p-".concat(this.userId)),this.initHistoryChat(),this.myAvatar=o.default.myInfo.avatar},onUnload:function(){this.msgList=[],clearInterval(this.flag),o.default.isChatRoom="",o.default.nim.resetSessionUnread("p2p-".concat(this.userId))},onShow:function(){console.log(this.msgList),"4804"==this.userId?this.showSend=!1:2==this.sex&&0==this.msgList.length?this.showSend=!1:this.showSend=!0},methods:{scroll:function(t){console.log(t.detail.scrollTop),this.old.scrollTop=t.detail.scrollTop},InputFocus:function(t){this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0},initHistoryChat:function(){var s=this;o.default.msgs.map(function(e,n){if(e.to===s.userId&&s.msgList!=e.msgs){console.log(s.msgList),s.msgList=[].concat(JSON.parse(JSON.stringify(e.msgs)));for(var i=1;i<s.msgList.length;i++)s.msgList[i].time-s.msgList[i-1].time<3e5?s.msgList[i].show=!1:s.msgList[i].show=!0;s.msgList[0].show=!0,s.msgList.map(function(t,s){null!=t.time&&(t.time=o.default.calcTimeHeader(t.time))}),console.log("THAT.msgList",s.msgList),s.flag=setInterval(function(){if(s.msgList.length!=e.msgs.length){console.log(s.msgList),s.msgList=[].concat(JSON.parse(JSON.stringify(e.msgs)));for(var n=1;n<s.msgList.length;n++)s.msgList[n].time-s.msgList[n-1].time<3e5?s.msgList[n].show=!1:s.msgList[n].show=!0;s.msgList[0].show=!0,s.msgList.map(function(t,s){null!=t.time&&(t.time=o.default.calcTimeHeader(t.time))}),setTimeout(function(){t.pageScrollTo({scrollTop:150*s.msgList.length,duration:0})},0)}},1e3),setTimeout(function(){t.pageScrollTo({scrollTop:150*s.msgList.length,duration:0})},0)}else s.isChat=!1})},sendMSG:function(){var t=this;o.default.nim.sendText({scene:"p2p",to:t.userId,text:t.body,done:function(s,e){console.log(s),console.log(e),console.log("发送"+e.scene+" "+e.type+"消息"+(s?"失败":"成功")+", id="+e.idClient),console.log(o.default.msgs);var n=0,i=!1;o.default.msgs.map(function(s,o){s.to===t.userId&&(console.log(s),i=!0,s.msgs.push(e)),n++}),0==i&&(console.log(n),o.default.msgs[n]={sessionId:"p2p-"+e.to,scene:"p2p",to:e.to,msgs:[],timetag:(new Date).valueOf(),time:"NaN-NaN-NaN NaN:NaN"},console.log(o.default.msgs[n].msgs),o.default.msgs[n].msgs.push(e),console.log(o.default.msgs[n].msgs),t.msgList=[].concat(JSON.parse(JSON.stringify(o.default.msgs[n].msgs))),console.log(t.msgList),t.initHistoryChat()),t.body=""}})},showModal:function(){t.showModal({title:"提示",content:"下载APP体验更多功能",success:function(s){s.confirm?(t.navigateTo({url:"../../pagesB/DownloadApp"}),console.log("用户点击确定")):s.cancel&&console.log("用户点击取消")}})},timeStamp:function(t){var s=parseInt(t)+"秒";if(parseInt(t)>60){var e=parseInt(t)%60,n=parseInt(t/60);if(s=n+"分"+e+"秒",n>60){n=parseInt(t/60)%60;var o=parseInt(parseInt(t/60)/60);if(s=o+"小时"+n+"分",o>24)o=parseInt(parseInt(t/60)/60)%24,s=parseInt(parseInt(parseInt(t/60)/60)/24)+"天"+o+"小时"}}return s}}};s.default=i}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},56:
/*!**************************************************************************************************************************!*\
  !*** C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=style&index=0&id=6ce13673&scoped=true&lang=css& ***!
  \**************************************************************************************************************************/
/*! no static exports found */function(t,s,e){"use strict";e.r(s);var n=e(/*! -!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader??ref--6-oneOf-1-2!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ChatRoom.vue?vue&type=style&index=0&id=6ce13673&scoped=true&lang=css& */57),o=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(s,t,function(){return n[t]})}(i);s.default=o.a},57:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/xch752/Downloads/hoda/pages/message/ChatRoom.vue?vue&type=style&index=0&id=6ce13673&scoped=true&lang=css& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,s,e){}},[[50,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/message/ChatRoom.js.map